TODO

本次问题
-------

我们知道，当比原节点启动以后，会根据选择的`chain_id`的不同，监听不同的端口：

1. mainnet（连接到主网）: 46657
2. testnet（连接到测试网）: 46656
3. solonet（本地单独节点）: 46658

对于我来说，由于我只需要对本地运行的一个比原节点进行分析，所以可以采用第3个`chain_id`，即`solonet`，这样它启动之后，不会与其它的节点主动连接，可以减少其它节点对于我们的干扰。

所以在启动的时候，我们的命令是这样的：

```
cd cmd/bytomd
./bytomd init --chain_id solonet
./bytomd node
```

如果这时我们使用`telnet`来连接其46658端口，可以看到它会发给我们一些乱码，如下：

```
$ telnet localhost 46658
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
ט�S��%�z?��_�端��݂���U[e
```

我们本次的问题是：它发给我们的到底是什么？我们作为外部的客户端，到底应该怎么做，才能与它成功的建立起连接？

问题分解
------

如果对上面的问题进行进一步的分解，它可以按顺序细分为以下几个问题：

1. 比原是如何启动并监听本地的46658端口的
2. 当我们使用telnet连接上以后，比原是如何知道有新连接的
3. 比原向我们发送了什么，以及期望我们给它发什么数据

下面我将就这几个问题，依次结合代码来进行分析。

比原是如何启动并监听本地的46658端口的
--------------------------------

我们启动比原前，需要先进行编译：

```
make bytomd
```

它将生成`cmd/bytomd/bytomd`这个可执行文件供我们使用。而这个文件，实际上对应的就是`cmd/bytomd/main.go`，所以我们可以从`main.go`开始看起。

打开`cmd/bytomd/main.go`，经过观察，我们可以看到以下几个特点：

1. 它的`package`是`main`，并且还有一个`main`函数
2. 它有一个`init`函数
3. 

当我们使用telnet连接上以后，比原是如何知道有新连接的
-----------------------------------------------

比原向我们发送了什么，以及期望我们给它发什么数据
----------------------------------------

